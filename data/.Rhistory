carrier_name %in%
top_five_delayed[['carrier_name']])
# Chunk 14
p1 <- ggplot(data = subset_flight,
aes(x = year, y = on_time)) +
geom_line(aes(color = carrier_name)) +
scale_x_continuous(limits=c(2005, 2015), breaks=c(2005:2015))+
ggtitle('On-time proportion of 5 carriers with highest delayed flights')+
labs(x='year', y='on-time proportion')
p2 <- ggplot(data = subset_flight,
aes(x = year, y = arrivals)) +
geom_line(aes(color = carrier_name)) +
scale_x_continuous(limits=c(2005, 2015), breaks=c(2005:2015))+
ggtitle('Total arrivals of 5 carriers with the highest delayed flights')+
labs(x='year', y='total arrivals')
grid.arrange(p1, p2, ncol = 1)
# Chunk 15
new_subset_flight<- filter(subset_flight,
carrier_name!='SkyWest Airlines Inc.' &
carrier_name != 'Northwest Airlines Inc.',
year != 2015)
p3 <- ggplot(data = new_subset_flight,
aes(x = year, y = on_time)) +
geom_line(aes(color = carrier_name)) +
scale_x_continuous(limits=c(2005, 2014), breaks=c(2005:2014))+
ggtitle('On-time proportion of 3 carriers with highest delayed flights')+
labs(x='year', y='on-time proportion')
p4 <- ggplot(data = new_subset_flight,
aes(x = year, y = arrivals)) +
geom_line(aes(color = carrier_name)) +
scale_x_continuous(limits=c(2005, 2014), breaks=c(2005:2014))+
ggtitle('Total arrivals of 3 carriers with the highest delayed flights')+
labs(x='year', y='total arrivals')
grid.arrange(p3, p4, ncol = 1)
# Chunk 16
##Create new CSV
write.csv(new_subset_flight, file="new_flight.csv", row.names=FALSE)
verage_delay_summary <- data.frame(average_delay_summary)
average_delay_summary <- melt(average_delay_summary,
id.vars = "carrier_name")
options(scipen=999)
ggplot(data = average_delay_summary,
aes(x=variable, y=value, fill=carrier_name))+
geom_bar(stat = 'identity',
position = 'dodge',
aes(color = carrier_name))+
theme(axis.text.x = element_text(angle = 90, hjust=1, vjust=.4))+
ggtitle("Comparison between different delay cause by carrier")
library(reshape2)
average_delay_summary <- data.frame(average_delay_summary)
average_delay_summary <- melt(average_delay_summary,
id.vars = "carrier_name")
ggplot(data = average_delay_summary,
aes(x=variable, y=value, fill=carrier_name))+
geom_bar(stat = 'identity',
position = 'dodge',
aes(color = carrier_name))+
theme(axis.text.x = element_text(angle = 90, hjust=1, vjust=.4))+
ggtitle("Comparison between different delay cause by carrier")
# Chunk 1: global_options
knitr::opts_chunk$set(echo=FALSE, warning=FALSE, message=FALSE)
options(scipen=999)
#Import dataset as a dataframe
flight <- read.csv("flight_performance.csv", header=T, check.names=F)
# Chunk 2
#Get a summary of datatype and data info using summary and str
str(flight)
summary(flight)
#Inspect the structure of the data using head(data)
head(flight)
# Chunk 3
flight <- flight[,colSums(is.na(flight))<nrow(flight)]
# Chunk 4
#Check how many carriers in this dataset
carriers <- unique(flight$carrier_name)
print(paste("There are", length(carriers), "carriers in this dataset."))
# Chunk 5
###Load necessary packages for data exploration and analysis###
require(ggplot2)
require(grid)
require(scales)
require(dplyr)
require(gridExtra)
library(RColorBrewer)
library(ggthemes)
# Chunk 6
flight_summary <- flight %>%
group_by(year, carrier_name) %>%
summarize(arrivals = sum(arr_flights),
delayed = sum(arr_del15),
cancelled = sum(arr_cancelled),
diverted = sum(arr_diverted)) %>%
transform(on_time = 1 - delayed/arrivals)
# Chunk 7
#Remove all row with NA values from the flight_summary dataframe
flight_summary <- na.omit(flight_summary)
# Chunk 8
ggplot(data = flight_summary, aes(x=year, y=on_time))+
scale_x_continuous(name = "Year",
breaks = seq(2005, 2015, 1))+
geom_line(aes(color=carrier_name))
# Chunk 9
#Make new dataset that includes the average number of arrivals
#delayed flights, cancelled flights, and diverted flights and the proportion of
#on_time flights in the last 10 years by carrier
flight_summary_average <- flight_summary %>%
group_by(carrier_name) %>%
summarize(ave_arrivals = mean(arrivals),
ave_delayed = mean(delayed),
ave_cancelled = mean(cancelled),
ave_diverted = mean(diverted),
ave_ontime = mean(on_time))
# Chunk 10
top_five_delayed <- flight_summary_average%>%
arrange(desc(ave_delayed))%>%
top_n(5, ave_delayed)
top_five_ontime <- flight_summary_average%>%
arrange((desc(ave_ontime)))%>%
top_n(5, ave_ontime)
# Chunk 11
ggplot(data = top_five_delayed, aes(x=carrier_name, ave_delayed))+
geom_bar(stat = 'identity', position = 'dodge')+
theme(axis.text.x = element_text(angle = 90, hjust = 1, vjust=.4))+
labs(x="carrier name", y='Average number of delayed flights')+
ggtitle("Average number of delayed flights from Jan 2007 to Jan 2017")
ggplot(data = top_five_ontime, aes(x=carrier_name, y=ave_ontime))+
geom_bar(stat = 'identity', position = 'dodge')+
labs(x='carrier name', y='Average proportion of on-time flights')+
theme(axis.text.x = element_text(angle = 90, hjust=1, vjust=.4))+
ggtitle('Average proportion of on-time flights from Jan 2007 to Jan 2017')
# Chunk 12
#Subseting all data point related to airlines belonging to the top_five_delay list
subset_delay <- filter(flight,
carrier_name %in%
top_five_delayed[['carrier_name']])
#Create new summary for each delay cause for each carrier
delay_summary <- subset_delay %>%
group_by(carrier_name, year) %>%
summarize(arr_delay = sum(` arr_delay`),
carrier_delay = sum(` carrier_delay`),
weather_delay = sum(weather_delay),
nas_delay = sum(nas_delay),
security_delay = sum(security_delay),
late_aircraft_delay = sum(late_aircraft_delay))
#Remove NA rows from delay_summary dataset
delay_summary <- na.omit(delay_summary)
#Calcuate the average number of delayed flight by each category from 2005-2017
average_delay_summary <- delay_summary %>%
group_by(carrier_name)%>%
summarize(arr_delay = sum(arr_delay),
carrier_delay = sum(carrier_delay),
weather_delay = sum(weather_delay),
nas_delay = sum(nas_delay),
security_delay = sum(security_delay),
late_aircraft_delay = sum(late_aircraft_delay))
#Create grouped bar plots
library(reshape2)
average_delay_summary <- data.frame(average_delay_summary)
average_delay_summary <- melt(average_delay_summary,
id.vars = "carrier_name")
ggplot(data = average_delay_summary,
aes(x=variable, y=value, fill=carrier_name))+
geom_bar(stat = 'identity',
position = 'dodge',
aes(color = carrier_name))+
theme(axis.text.x = element_text(angle = 90, hjust=1, vjust=.4))+
ggtitle("Comparison between different delay cause by carrier")
# Chunk 13
#Subseting info for the top five airlines with the highest average number of
#delayed flights
subset_flight <- filter(flight_summary,
carrier_name %in%
top_five_delayed[['carrier_name']])
# Chunk 14
p1 <- ggplot(data = subset_flight,
aes(x = year, y = on_time)) +
geom_line(aes(color = carrier_name)) +
scale_x_continuous(limits=c(2005, 2015), breaks=c(2005:2015))+
ggtitle('On-time proportion of 5 carriers with highest delayed flights')+
labs(x='year', y='on-time proportion')
p2 <- ggplot(data = subset_flight,
aes(x = year, y = arrivals)) +
geom_line(aes(color = carrier_name)) +
scale_x_continuous(limits=c(2005, 2015), breaks=c(2005:2015))+
ggtitle('Total arrivals of 5 carriers with the highest delayed flights')+
labs(x='year', y='total arrivals')
grid.arrange(p1, p2, ncol = 1)
# Chunk 15
new_subset_flight<- filter(subset_flight,
carrier_name!='SkyWest Airlines Inc.' &
carrier_name != 'Northwest Airlines Inc.',
year != 2015)
p3 <- ggplot(data = new_subset_flight,
aes(x = year, y = on_time)) +
geom_line(aes(color = carrier_name)) +
scale_x_continuous(limits=c(2005, 2014), breaks=c(2005:2014))+
ggtitle('On-time proportion of 3 carriers with highest delayed flights')+
labs(x='year', y='on-time proportion')
p4 <- ggplot(data = new_subset_flight,
aes(x = year, y = arrivals)) +
geom_line(aes(color = carrier_name)) +
scale_x_continuous(limits=c(2005, 2014), breaks=c(2005:2014))+
ggtitle('Total arrivals of 3 carriers with the highest delayed flights')+
labs(x='year', y='total arrivals')
grid.arrange(p3, p4, ncol = 1)
# Chunk 16
##Create new CSV
write.csv(new_subset_flight, file="new_flight.csv", row.names=FALSE)
# Chunk 1: global_options
knitr::opts_chunk$set(echo=FALSE, warning=FALSE, message=FALSE)
options(scipen=999)
#Import dataset as a dataframe
flight <- read.csv("flight_performance.csv", header=T, check.names=F)
# Chunk 2
#Get a summary of datatype and data info using summary and str
str(flight)
summary(flight)
#Inspect the structure of the data using head(data)
head(flight)
# Chunk 3
flight <- flight[,colSums(is.na(flight))<nrow(flight)]
# Chunk 4
#Check how many carriers in this dataset
carriers <- unique(flight$carrier_name)
print(paste("There are", length(carriers), "carriers in this dataset."))
# Chunk 5
###Load necessary packages for data exploration and analysis###
require(ggplot2)
require(grid)
require(scales)
require(dplyr)
require(gridExtra)
library(RColorBrewer)
library(ggthemes)
# Chunk 6
flight_summary <- flight %>%
group_by(year, carrier_name) %>%
summarize(arrivals = sum(arr_flights),
delayed = sum(arr_del15),
cancelled = sum(arr_cancelled),
diverted = sum(arr_diverted)) %>%
transform(on_time = 1 - delayed/arrivals)
# Chunk 7
#Remove all row with NA values from the flight_summary dataframe
flight_summary <- na.omit(flight_summary)
# Chunk 8
ggplot(data = flight_summary, aes(x=year, y=on_time))+
scale_x_continuous(name = "Year",
breaks = seq(2005, 2015, 1))+
geom_line(aes(color=carrier_name))
# Chunk 9
#Make new dataset that includes the average number of arrivals
#delayed flights, cancelled flights, and diverted flights and the proportion of
#on_time flights in the last 10 years by carrier
flight_summary_average <- flight_summary %>%
group_by(carrier_name) %>%
summarize(ave_arrivals = mean(arrivals),
ave_delayed = mean(delayed),
ave_cancelled = mean(cancelled),
ave_diverted = mean(diverted),
ave_ontime = mean(on_time))
# Chunk 10
top_five_delayed <- flight_summary_average%>%
arrange(desc(ave_delayed))%>%
top_n(5, ave_delayed)
top_five_ontime <- flight_summary_average%>%
arrange((desc(ave_ontime)))%>%
top_n(5, ave_ontime)
# Chunk 11
ggplot(data = top_five_delayed, aes(x=carrier_name, ave_delayed))+
geom_bar(stat = 'identity', position = 'dodge')+
theme(axis.text.x = element_text(angle = 90, hjust = 1, vjust=.4))+
labs(x="carrier name", y='Average number of delayed flights')+
ggtitle("Average number of delayed flights from Jan 2007 to Jan 2017")
ggplot(data = top_five_ontime, aes(x=carrier_name, y=ave_ontime))+
geom_bar(stat = 'identity', position = 'dodge')+
labs(x='carrier name', y='Average proportion of on-time flights')+
theme(axis.text.x = element_text(angle = 90, hjust=1, vjust=.4))+
ggtitle('Average proportion of on-time flights from Jan 2007 to Jan 2017')
# Chunk 12
#Subseting all data point related to airlines belonging to the top_five_delay list
subset_delay <- filter(flight,
carrier_name %in%
top_five_delayed[['carrier_name']])
#Create new summary for each delay cause for each carrier
delay_summary <- subset_delay %>%
group_by(carrier_name, year) %>%
summarize(arr_delay = sum(` arr_delay`),
carrier_delay = sum(` carrier_delay`),
weather_delay = sum(weather_delay),
nas_delay = sum(nas_delay),
security_delay = sum(security_delay),
late_aircraft_delay = sum(late_aircraft_delay))
#Remove NA rows from delay_summary dataset
delay_summary <- na.omit(delay_summary)
#Calcuate the average number of delayed flight by each category from 2005-2017
average_delay_summary <- delay_summary %>%
group_by(carrier_name)%>%
summarize(arr_delay = sum(arr_delay),
carrier_delay = sum(carrier_delay),
weather_delay = sum(weather_delay),
nas_delay = sum(nas_delay),
security_delay = sum(security_delay),
late_aircraft_delay = sum(late_aircraft_delay))
#Create grouped bar plots
library(reshape2)
average_delay_summary <- data.frame(average_delay_summary)
average_delay_summary <- melt(average_delay_summary,
id.vars = "carrier_name")
ggplot(data = average_delay_summary,
aes(x=variable, y=value, fill=carrier_name))+
geom_bar(stat = 'identity',
position = 'dodge',
aes(color = carrier_name))+
theme(axis.text.x = element_text(angle = 90, hjust=1, vjust=.4))+
ggtitle("Comparison between different delay cause by carrier")
# Chunk 13
#Subseting info for the top five airlines with the highest average number of
#delayed flights
subset_flight <- filter(flight_summary,
carrier_name %in%
top_five_delayed[['carrier_name']])
# Chunk 14
p1 <- ggplot(data = subset_flight,
aes(x = year, y = on_time)) +
geom_line(aes(color = carrier_name)) +
scale_x_continuous(limits=c(2005, 2015), breaks=c(2005:2015))+
ggtitle('On-time proportion of 5 carriers with highest delayed flights')+
labs(x='year', y='on-time proportion')
p2 <- ggplot(data = subset_flight,
aes(x = year, y = arrivals)) +
geom_line(aes(color = carrier_name)) +
scale_x_continuous(limits=c(2005, 2015), breaks=c(2005:2015))+
ggtitle('Total arrivals of 5 carriers with the highest delayed flights')+
labs(x='year', y='total arrivals')
grid.arrange(p1, p2, ncol = 1)
# Chunk 15
new_subset_flight<- filter(subset_flight,
carrier_name!='SkyWest Airlines Inc.' &
carrier_name != 'Northwest Airlines Inc.',
year != 2015)
p3 <- ggplot(data = new_subset_flight,
aes(x = year, y = on_time)) +
geom_line(aes(color = carrier_name)) +
scale_x_continuous(limits=c(2005, 2014), breaks=c(2005:2014))+
ggtitle('On-time proportion of 3 carriers with highest delayed flights')+
labs(x='year', y='on-time proportion')
p4 <- ggplot(data = new_subset_flight,
aes(x = year, y = arrivals)) +
geom_line(aes(color = carrier_name)) +
scale_x_continuous(limits=c(2005, 2014), breaks=c(2005:2014))+
ggtitle('Total arrivals of 3 carriers with the highest delayed flights')+
labs(x='year', y='total arrivals')
grid.arrange(p3, p4, ncol = 1)
# Chunk 16
##Create new CSV
write.csv(top_five_delayed, file="top_five_delay.csv", row.names = FALSE)
write.csv(top_five_ontime, file="top_five_on_time.csv", row.names = FALSE)
write.csv(average_delay_summary, file="most_common_delay_cause.csv", row.names = FALSE)
write.csv(new_subset_flight, file="performance_over_time.csv", row.names=FALSE)
# Chunk 1: global_options
knitr::opts_chunk$set(echo=FALSE, warning=FALSE, message=FALSE)
options(scipen=999)
#Import dataset as a dataframe
flight <- read.csv("flight_performance.csv", header=T, check.names=F)
# Chunk 2
#Get a summary of datatype and data info using summary and str
str(flight)
summary(flight)
#Inspect the structure of the data using head(data)
head(flight)
# Chunk 3
flight <- flight[,colSums(is.na(flight))<nrow(flight)]
# Chunk 4
#Check how many carriers in this dataset
carriers <- unique(flight$carrier_name)
print(paste("There are", length(carriers), "carriers in this dataset."))
# Chunk 5
###Load necessary packages for data exploration and analysis###
require(ggplot2)
require(grid)
require(scales)
require(dplyr)
require(gridExtra)
library(RColorBrewer)
library(ggthemes)
# Chunk 6
flight_summary <- flight %>%
group_by(year, carrier_name) %>%
summarize(arrivals = sum(arr_flights),
delayed = sum(arr_del15),
cancelled = sum(arr_cancelled),
diverted = sum(arr_diverted)) %>%
transform(on_time = 1 - delayed/arrivals)
# Chunk 7
#Remove all row with NA values from the flight_summary dataframe
flight_summary <- na.omit(flight_summary)
# Chunk 8
ggplot(data = flight_summary, aes(x=year, y=on_time))+
scale_x_continuous(name = "Year",
breaks = seq(2005, 2015, 1))+
geom_line(aes(color=carrier_name))
# Chunk 9
#Make new dataset that includes the average number of arrivals
#delayed flights, cancelled flights, and diverted flights and the proportion of
#on_time flights in the last 10 years by carrier
flight_summary_average <- flight_summary %>%
group_by(carrier_name) %>%
summarize(ave_arrivals = mean(arrivals),
ave_delayed = mean(delayed),
ave_cancelled = mean(cancelled),
ave_diverted = mean(diverted),
ave_ontime = mean(on_time))
# Chunk 10
top_five_delayed <- flight_summary_average%>%
arrange(desc(ave_delayed))%>%
top_n(5, ave_delayed)
top_five_ontime <- flight_summary_average%>%
arrange((desc(ave_ontime)))%>%
top_n(5, ave_ontime)
# Chunk 11
ggplot(data = top_five_delayed, aes(x=carrier_name, ave_delayed))+
geom_bar(stat = 'identity', position = 'dodge')+
theme(axis.text.x = element_text(angle = 90, hjust = 1, vjust=.4))+
labs(x="carrier name", y='Average number of delayed flights')+
ggtitle("Average number of delayed flights from Jan 2007 to Jan 2017")
ggplot(data = top_five_ontime, aes(x=carrier_name, y=ave_ontime))+
geom_bar(stat = 'identity', position = 'dodge')+
labs(x='carrier name', y='Average proportion of on-time flights')+
theme(axis.text.x = element_text(angle = 90, hjust=1, vjust=.4))+
ggtitle('Average proportion of on-time flights from Jan 2007 to Jan 2017')
# Chunk 12
#Subseting all data point related to airlines belonging to the top_five_delay list
subset_delay <- filter(flight,
carrier_name %in%
top_five_delayed[['carrier_name']])
#Create new summary for each delay cause for each carrier
delay_summary <- subset_delay %>%
group_by(carrier_name, year) %>%
summarize(arr_delay = sum(` arr_delay`),
carrier_delay = sum(` carrier_delay`),
weather_delay = sum(weather_delay),
nas_delay = sum(nas_delay),
security_delay = sum(security_delay),
late_aircraft_delay = sum(late_aircraft_delay))
#Remove NA rows from delay_summary dataset
delay_summary <- na.omit(delay_summary)
#Calcuate the average number of delayed flight by each category from 2005-2017
average_delay_summary <- delay_summary %>%
group_by(carrier_name)%>%
summarize(arr_delay = sum(arr_delay),
carrier_delay = sum(carrier_delay),
weather_delay = sum(weather_delay),
nas_delay = sum(nas_delay),
security_delay = sum(security_delay),
late_aircraft_delay = sum(late_aircraft_delay))
#Create grouped bar plots
library(reshape2)
average_delay_summary <- data.frame(average_delay_summary)
average_delay_summary <- melt(average_delay_summary,
id.vars = "carrier_name")
ggplot(data = average_delay_summary,
aes(x=variable, y=value, fill=carrier_name))+
geom_bar(stat = 'identity',
position = 'dodge',
aes(color = carrier_name))+
theme(axis.text.x = element_text(angle = 90, hjust=1, vjust=.4))+
ggtitle("Comparison between different delay cause by carrier")
# Chunk 13
#Subseting info for the top five airlines with the highest average number of
#delayed flights
subset_flight <- filter(flight_summary,
carrier_name %in%
top_five_delayed[['carrier_name']])
# Chunk 14
p1 <- ggplot(data = subset_flight,
aes(x = year, y = on_time)) +
geom_line(aes(color = carrier_name)) +
scale_x_continuous(limits=c(2005, 2015), breaks=c(2005:2015))+
ggtitle('On-time proportion of 5 carriers with highest delayed flights')+
labs(x='year', y='on-time proportion')
p2 <- ggplot(data = subset_flight,
aes(x = year, y = arrivals)) +
geom_line(aes(color = carrier_name)) +
scale_x_continuous(limits=c(2005, 2015), breaks=c(2005:2015))+
ggtitle('Total arrivals of 5 carriers with the highest delayed flights')+
labs(x='year', y='total arrivals')
grid.arrange(p1, p2, ncol = 1)
# Chunk 15
new_subset_flight<- filter(subset_flight,
carrier_name!='SkyWest Airlines Inc.' &
carrier_name != 'Northwest Airlines Inc.',
year != 2015)
p3 <- ggplot(data = new_subset_flight,
aes(x = year, y = on_time)) +
geom_line(aes(color = carrier_name)) +
scale_x_continuous(limits=c(2005, 2014), breaks=c(2005:2014))+
ggtitle('On-time proportion of 3 carriers with highest delayed flights')+
labs(x='year', y='on-time proportion')
p4 <- ggplot(data = new_subset_flight,
aes(x = year, y = arrivals)) +
geom_line(aes(color = carrier_name)) +
scale_x_continuous(limits=c(2005, 2014), breaks=c(2005:2014))+
ggtitle('Total arrivals of 3 carriers with the highest delayed flights')+
labs(x='year', y='total arrivals')
grid.arrange(p3, p4, ncol = 1)
# Chunk 16
##Create new CSV
write.csv(top_five_delayed, file="top_five_delay.csv", row.names = FALSE)
write.csv(top_five_ontime, file="top_five_on_time.csv", row.names = FALSE)
write.csv(average_delay_summary, file="most_common_delay_cause.csv", row.names = FALSE)
write.csv(new_subset_flight, file="performance_over_time.csv", row.names=FALSE)
